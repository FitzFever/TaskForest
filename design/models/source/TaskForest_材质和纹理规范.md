# TaskForest_材质和纹理规范

## 概述

本文档定义了TaskForest项目中所有3D树木模型的材质和纹理标准。遵循这些规范可以确保视觉风格统一、渲染效率高，同时保证在目标平台上的最佳表现。

## 材质系统设计

TaskForest项目使用基于物理的渲染(PBR)材质系统，但进行了简化，以优化性能并适应项目的风格化需求。

### 核心材质类型

项目中使用以下几种核心材质类型：

1. **树干材质**：适用于所有树木的主干和分支
2. **叶片材质**：适用于所有类型的树叶、松针等
3. **果实材质**：适用于种子、果实和花朵
4. **土壤材质**：用于模型底部的土壤基座

### 材质参数标准

#### 树干材质
- **基础颜色**：棕色色调，根据树种调整（橡树较深，樱花树较浅）
- **粗糙度**：0.8-0.95（较高，表现木材质感）
- **金属度**：0（非金属）
- **法线强度**：0.5-0.8（适度的表面细节）
- **环境光遮蔽**：内置于基础颜色贴图或单独贴图

#### 叶片材质
- **基础颜色**：绿色色调，根据树种调整
- **透明度**：仅在边缘使用，主体不透明
- **双面渲染**：启用
- **粗糙度**：0.7-0.8（略微有光泽）
- **法线强度**：0.3-0.5（轻微细节）
- **次表面散射**：轻微启用（0.1-0.2）

#### 果实/种子材质
- **基础颜色**：根据种类有明显变化
- **粗糙度**：0.4-0.7（比树干更光滑）
- **法线强度**：0.6-0.9（细节更明显）

#### 土壤材质
- **基础颜色**：土褐色
- **粗糙度**：1.0（完全不反光）
- **凹凸贴图**：轻微的土壤纹理

## 纹理规范

### 纹理图集系统

为提高渲染效率，TaskForest项目使用纹理图集（Texture Atlas）系统：

1. **树干图集**：包含所有树种的树干纹理
2. **叶片图集**：包含所有树种的叶片纹理
3. **细节图集**：包含种子、果实和特殊细节

### 纹理分辨率标准

| 纹理类型 | 尺寸 | 格式 | 压缩 |
|---------|------|------|------|
| 树干图集 | 1024x1024 | PNG | 无损压缩 |
| 叶片图集 | 1024x1024 | PNG | 无损压缩 |
| 细节图集 | 512x512 | PNG | 无损压缩 |
| 法线贴图 | 1024x1024 | PNG | 无损压缩 |
| 环境光遮蔽 | 512x512 | JPG | 90%质量 |

### 文件命名规范

```
tf_[类型]_[用途]_[可选:变种].png

例如：
tf_bark_atlas_01.png    // 树皮图集1
tf_leaf_oak.png         // 橡树叶纹理
tf_detail_seeds.png     // 种子细节纹理
tf_normal_bark.png      // 树皮法线贴图
```

## UV映射标准

### UV空间优化

- 所有模型必须进行UV展开
- 相似部分应共享UV空间（如多个树叶）
- UV岛屿之间应保留至少2像素间距
- 主要可见部分应分配更多UV空间

### UV布局推荐

- **树干**：主干占用30-40%空间，主要分支占用40-50%空间，细小分支占用剩余空间
- **树叶**：按照可见性分配UV空间，可见性高的区域分配更多空间
- **种子/土壤**：分配适当UV空间，避免过度拉伸

## 材质节点设置

### Blender材质设置

示例树干材质节点设置：

```
[图像纹理] -> [颜色混合] -> [Principled BSDF] -> [材质输出]
     |                |
[法线贴图] --------> [法线输入]
```

关键参数：
- Base Color: 连接到颜色贴图
- Roughness: 0.85
- Specular: 0.1
- Normal: 连接到法线贴图

### 叶片半透明设置

```
[图像纹理] -> [分离RGB] -> [颜色混合] -> [Principled BSDF] -> [材质输出]
     |           |
     |------> [Alpha输入]
```

## 树种特定材质指南

### 橡树材质
- 树干：深棕色，明显的垂直裂纹纹理
- 叶片：深绿色，哑光表面
- 种子：棕色橡实，光滑表面

### 松树材质
- 树干：红棕色，粗糙的鳞片状纹理
- 松针：深绿色，纤细且带有光泽
- 松果：棕色，明显的几何结构

### 樱花树材质
- 树干：浅灰棕色，较平滑的表面
- 叶片：鲜绿色，略带光泽
- 花朵：粉色，轻微透明度

### 棕榈树材质
- 树干：棕褐色，带有横向纹理
- 叶片：黄绿色，光滑表面
- 种子：深棕色，圆形轮廓

## 优化技巧

1. **共享材质实例**：同类型的树木部分使用同一材质实例
2. **减少纹理数量**：尽可能使用图集而非单独纹理
3. **合理使用法线贴图**：用法线贴图代替额外几何细节
4. **透明度优化**：叶片仅在边缘使用透明度，避免内部透明
5. **LOD材质**：远距离查看时使用简化材质

## 提交要求

所有材质和纹理必须按以下格式提交：

1. 纹理原始文件（.psd或.xcf格式）
2. 导出的优化纹理（按上述命名规范）
3. 材质库文件（适用于Blender项目）
4. 简短说明文档，描述任何特殊处理或注意事项

---

*最后更新：2023年5月10日*
